:root{
  --bg: linear-gradient(120deg, #eef2ff, #f8fafc); /* soft gradient */
  --panel: rgba(255,255,255,0.6);
  --panel-strong: rgba(255,255,255,0.85);
  --border: rgba(100,100,120,0.12);
  --text: #0f172a;
    --muted: #6b7280;
  --primary: #4f8cff;
  --shadow: 0 20px 50px rgba(2,8,20,0.08);
  }
  *{ box-sizing: border-box; }
  html, body{ height: 100%; overflow: hidden; }
  body{
    margin:0; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif;
    background: var(--bg); color: var(--text);
    background-attachment: fixed;
    transition: background-color .35s ease, color .35s ease, background .45s ease, opacity .25s ease;
  }
  /* View Transitions: treat whole document as one layer for cross-fade */
  html{ view-transition-name: theme-root; }
  ::view-transition-old(theme-root),
  ::view-transition-new(theme-root){
    animation-duration: .35s;
    animation-timing-function: ease;
  }
  @media (prefers-reduced-motion: reduce){
    ::view-transition-old(theme-root),
    ::view-transition-new(theme-root){ animation: none !important; }
  }
  .window-drag-region{ position:absolute; left:72px; top:0; width:84px; height:28px; -webkit-app-region: drag; pointer-events: none; }
  /* explicit theme via body[data-theme] */
  body[data-theme="dark"]{
    --bg: radial-gradient(1200px 800px at 20% 0%, #0b1220, #0a0d14 38%, #090b10 70%);
    --panel: rgba(17,20,28,0.7);
    --panel-strong: rgba(17,20,28,0.85);
    --border: rgba(255,255,255,0.09);
    --text: #e8e9ee;
    --muted: #a1a7af;
    --primary: #6a9bff;
  }
  /* Smooth global theme fade using a temporary class during theme toggle */
  body.theme-fade{ transition: none; }
  body.theme-fade::before{
    content: ""; position: fixed; inset: 0; pointer-events: none; z-index: 9999;
    background: var(--bg);
    animation: themeFadeOverlay .35s ease forwards;
    opacity: 0;
  }
  @keyframes themeFadeOverlay{ from{ opacity: 1; } to{ opacity: 0; } }
  /* While switching theme, disable transitions only for content areas (keep toolbar switch anim intact) */
  body.theme-switching .layout,
  body.theme-switching .layout *,
  body.theme-switching .modal,
  body.theme-switching .modal *,
  body.theme-switching .section,
  body.theme-switching .section *{
    transition: none !important;
    animation: none !important;
  }
  body[data-theme="dark"] .toolbar{ background: var(--panel); }
  body[data-theme="dark"] .card{ background: #0b0d12; color: var(--text); border-color: rgba(255,255,255,0.06); }
  body[data-theme="dark"] .btn.subtle{ background: rgba(30,34,46,0.8); color: var(--text); }
  /* Light mode explicit overrides */
  body[data-theme="light"] .card{ background:#ffffff; color:#0f172a; }
  body[data-theme="light"] .btn{ background:#ffffff; color:#0f172a; }
  body[data-theme="light"] .input, body[data-theme="light"] .select, body[data-theme="light"] .num{ background:#ffffff; color:#0f172a; }
  .toolbar{
    position: sticky; top:0; z-index:10; backdrop-filter: saturate(180%) blur(20px);
    background: var(--panel); border-bottom:1px solid var(--border);
    display:flex; align-items:center; gap:16px; padding:12px 16px 12px 72px; /* leave room for traffic lights */
    height: var(--toolbar-h);
    -webkit-app-region: drag; /* Entire toolbar draggable */
  }
  /* Make interactive elements clickable within draggable toolbar */
  .toolbar-left, .toolbar-center, .toolbar-right, .toolbar button, .toolbar input, .toolbar label{ -webkit-app-region: no-drag; pointer-events: auto; }
  .toolbar h1{ font-size:14px; font-weight:600; margin:0; letter-spacing:0.2px; }
  .toolbar .search{ width: 380px; max-width: 42vw; margin-left: 12px; }
  .toolbar-right{ display:flex; align-items:center; gap:12px; }
  .toolbar-end{ margin-left:auto; display:flex; align-items:center; gap:8px; -webkit-app-region: no-drag; pointer-events: auto; }
  .toolbar-right #infoBtn{ -webkit-app-region: no-drag; }

/* Schnellnotizen Popup */
.quick-notes-popup {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Generic modal open animation */
.modal .modal-content{ opacity: 0; transform: translateY(14px) scale(0.96); will-change: transform, opacity; }
.modal:not(.hidden) .modal-content{ animation: modalIn .38s cubic-bezier(0.2,0.8,0.2,1) both; }
@keyframes modalIn{ 0%{ opacity:0; transform: translateY(14px) scale(0.96);} 60%{ opacity:.98; transform: translateY(0) scale(1.01);} 100%{ opacity:1; transform: translateY(0) scale(1);} }
/* Close animation */
.modal.closing .modal-content{ animation: modalOut .28s cubic-bezier(0.2,0.8,0.2,1) both; }
@keyframes modalOut{ from{ opacity:1; transform: translateY(0) scale(1);} to{ opacity:0; transform: translateY(8px) scale(0.98);} }
@media (prefers-reduced-motion: reduce){ .modal:not(.hidden) .modal-content{ animation: none; opacity:1; transform:none; } }

.popup-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
}

.popup-content {
  position: relative;
  background: var(--panel-strong);
  border: 1px solid var(--border);
  border-radius: 12px;
  width: 90%;
  max-width: 500px;
  max-height: 70vh;
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.popup-header {
  padding: 20px 24px 16px;
  border-bottom: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.popup-header h3 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  color: var(--text);
}

.close-btn {
  background: none;
  border: none;
  font-size: 24px;
  color: var(--muted);
  cursor: pointer;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  transition: all 0.2s ease;
}

.close-btn:hover {
  background: rgba(255, 0, 0, 0.1);
  color: #ff4444;
}

.popup-body {
  flex: 1;
  padding: 20px 24px;
  overflow-y: auto;
}

.quick-notes-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.quick-note-item {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 12px 16px;
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
  transition: all 0.2s ease;
}

.quick-note-item:hover {
  background: var(--panel-strong);
  border-color: var(--primary);
}

.quick-note-text {
  flex: 1;
  font-size: 14px;
  line-height: 1.4;
  color: var(--text);
  word-wrap: break-word;
}

.quick-note-timestamp {
  font-size: 12px;
  color: var(--muted);
  flex-shrink: 0;
  margin-top: 2px;
}

.quick-note-delete {
  background: rgba(255, 0, 0, 0.1);
  border: none;
  border-radius: 4px;
  color: #ff4444;
  width: 24px;
  height: 24px;
  font-size: 14px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.quick-note-delete:hover {
  background: rgba(255, 0, 0, 0.2);
}

.empty-state {
  text-align: center;
  color: var(--muted);
  font-size: 14px;
  padding: 40px 20px;
}
#quickNotesIcon{ cursor: pointer; -webkit-app-region: no-drag; pointer-events: auto !important; }
/* Ensure the entire quick notes section is clickable */
.notes-section .quick-notes.group.small{ -webkit-app-region: no-drag; pointer-events: auto !important; }
/* Make sure the file container inside is also clickable */
.notes-section .quick-notes .file{ -webkit-app-region: no-drag; pointer-events: auto !important; }
  .toolbar .btn.primary{ padding:10px 16px; }
  .icon-only{ background: transparent; border: none; color: var(--text); cursor: pointer; display:grid; place-items:center; padding:0; width:28px; height:28px; -webkit-app-region: no-drag; }

/* Quick notes styling */
.quick-note-item { padding: 12px; margin-bottom: 8px; border-radius: 6px; transition: background-color 0.2s ease; border: 1px solid #e0e0e0; }
.quick-note-item:hover { background-color: rgba(0,0,0,0.02); }
  .icon-only .icon{ width:22px; height:22px; }
  .icon-only:hover{ color: var(--primary); }
  .sp{ display:flex; align-items:center; }
  .sparkle-button{ height:36px; display:flex; align-items:center; }
  /* Uiverse (JkHuger) sparkle button - scoped */
  .sparkle-button{ --active: 0; --transition: .35s; --spark: 1.8s; --cut: 0; --bg: radial-gradient(40% 50% at center 100%, hsl(220 calc(var(--active) * 97%) 68% / var(--active)), transparent), radial-gradient(80% 100% at center 120%, hsl(218 calc(var(--active) * 97%) 66% / var(--active)), transparent), hsl(218 calc(var(--active) * 97%) calc((var(--active) * 46%) + 14%)); background: var(--bg); font-size: 1.05rem; font-weight: 500; border: 0; cursor: pointer; padding: 1em 1em; display:flex; align-items:center; gap:.25em; white-space: nowrap; border-radius: 100px; position: relative; box-shadow: 0 0 calc(var(--active) * 3em) calc(var(--active) * 1em) hsl(218 97% 58% / 0.75), 0 0em 0 0 hsl(218 calc(var(--active) * 97%) calc((var(--active) * 50%) + 30%)) inset, 0 -0.05em 0 0 hsl(218 calc(var(--active) * 97%) calc(var(--active) * 60%)) inset; transition: box-shadow var(--transition), scale var(--transition), background var(--transition); scale: calc(1 + (var(--active) * 0.1)); }
  .sparkle-button:active{ scale:1; transition: .3s; }
  .sparkle-button .sparkle path{ color: hsl(0 0% calc((var(--active, 0) * 70%) + var(--base))); transform-box: fill-box; transform-origin: center; fill: currentColor; stroke: currentColor; animation-delay: calc((var(--transition) * 1.5) + (var(--delay) * 1s)); animation-duration: 0.6s; transition: color var(--transition); }
  .sparkle-button:is(:hover, :focus-visible) path{ animation-name: bounce; }
  @keyframes bounce{ 35%,65%{ scale: var(--scale); } }
  .sparkle-button .sparkle path:nth-of-type(1){ --scale: .5; --delay:.1; --base:40%; }
  .sparkle-button .sparkle path:nth-of-type(2){ --scale: 1.5; --delay:.2; --base:20%; }
  .sparkle-button .sparkle path:nth-of-type(3){ --scale: 2.5; --delay:.35; --base:30%; }
  .sparkle-button::before{ content:""; position:absolute; inset:-0.2em; z-index:-1; border:.25em solid hsl(218 97% 52% / .5); border-radius:100px; opacity: var(--active, 0); transition: opacity var(--transition); }
  .spark{ position:absolute; inset:0; border-radius:100px; rotate:0deg; overflow:hidden; mask: linear-gradient(white, transparent 50%); animation: flip calc(var(--spark) * 2) infinite steps(2, end); }
  .spark, .backdrop, .sparkle, .particle-pen, .particle, .text{ pointer-events: none; }
  @keyframes flip{ to{ rotate: 360deg; } }
  .spark::before{ content:""; position:absolute; width:200%; aspect-ratio:1; top:0%; left:50%; z-index:-1; translate:-50% -15%; rotate:0; transform: rotate(-90deg); opacity: calc((var(--active)) + 0.4); background: conic-gradient(from 0deg, transparent 0 340deg, white 360deg); transition: opacity var(--transition); animation: rotate var(--spark) linear infinite both; }
  .spark::after{ content:""; position:absolute; inset: var(--cut); border-radius:100px; }
  .backdrop{ position:absolute; inset: var(--cut); background: var(--bg); border-radius:100px; transition: background var(--transition); }
  @keyframes rotate{ to{ transform: rotate(90deg); } }
  @supports(selector(:has(:is(+ *)))){
    body:has(.sparkle-button:is(:hover, :focus-visible)){ --active:1; --play-state: running; }
    .bodydrop{ display:none; }
  }
  .sparkle-button:is(:hover, :focus-visible) ~ :is(.bodydrop, .particle-pen){ --active:1; --play-state: running; }
  .sparkle-button:is(:hover, :focus-visible){ --active:1; --play-state: running; }
  .sp{ position:relative; }
  /* Simplify sparkle particles for a cleaner look */
  .particle-pen{ display:none; }
  .particle{ fill:white; width: calc(var(--size, 0.25) * 1rem); aspect-ratio:1; position:absolute; top: calc(var(--y) * 1%); left: calc(var(--x) * 1%); opacity: var(--alpha, 1); animation: float-out calc(var(--duration, 1) * 1s) calc(var(--delay) * -1s) infinite linear; transform-origin: var(--origin-x, 1000%) var(--origin-y, 1000%); z-index:-1; animation-play-state: var(--play-state, paused); }
  .particle path{ fill: hsl(0 0% 90%); stroke: none; }
  .particle:nth-of-type(even){ animation-direction: reverse; }
  @keyframes float-out{ to{ rotate: 360deg; } }
  .sparkle-button .text{ translate: 2% -6%; letter-spacing: 0.01ch; background: linear-gradient(90deg, hsl(0 0% calc((var(--active) * 100%) + 65%)), hsl(0 0% calc((var(--active) * 100%) + 26%))); -webkit-background-clip: text; color: transparent; transition: background var(--transition); }
  .sparkle-button svg{ inline-size: 1.25em; translate: -25% -5%; }
  .toolbar-right .switch{ margin-right: 6px; }
  .toolbar-right .sp{ margin-left: 6px; }

  /* Light-mode variant for sparkle button (brighter base) */
  body[data-theme="light"] .sparkle-button{
    --bg: radial-gradient(40% 50% at center 100%, hsl(218 90% 88% / var(--active)), transparent),
          radial-gradient(80% 100% at center 120%, hsl(218 92% 84% / var(--active)), transparent),
          hsl(218 92% calc((var(--active) * 22%) + 92%));
    color:#0f172a;
    box-shadow: 0 0 calc(var(--active) * 3em) calc(var(--active) * 1em) hsl(218 92% 72% / 0.75),
                0 0em 0 0 hsl(218 92% 90%) inset,
                0 -0.05em 0 0 hsl(218 92% 85%) inset;
  }

  /* Light mode hover: force blue background instead of washing out to white */
  body[data-theme="light"] .sparkle-button:is(:hover, :focus-visible){
    background: var(--primary) !important;
    border-color: var(--primary) !important;
    box-shadow: 0 0 60px rgba(79,140,255,0.65), 0 0 100px rgba(79,140,255,0.35), 0 0 0 2px rgba(79,140,255,0.25) inset !important;
    color:#ffffff !important;
  }
  body[data-theme="light"] .sparkle-button:is(:hover, :focus-visible) .text{
    background: none !important;
    color:#ffffff !important;
  }
  /* Ensure internal layers also turn blue in light hover */
  body[data-theme="light"] .sparkle-button:is(:hover, :focus-visible) .backdrop{
    background: var(--primary) !important;
  }
  body[data-theme="light"] .sparkle-button:is(:hover, :focus-visible)::before{
    border-color: hsl(218 97% 52% / .5) !important;
    opacity: 1 !important;
  }
  /* Neutralize white conic shine that washed out to white */
  body[data-theme="light"] .sparkle-button:is(:hover, :focus-visible) .spark::before{
    background: conic-gradient(from 0deg, transparent 0 360deg) !important;
    opacity: .15 !important;
  }

  /* Focus button (uiverse-star) even stronger hover */
  .uiverse-star{
    position:relative;
  }
  /* Replace visible ring with subtle moving shine */
  .uiverse-star::before{ display:none; }
  .uiverse-star .shine{ position:absolute; inset:-30%; pointer-events:none; background: radial-gradient(ellipse at 30% 30%, rgba(255,255,255,0.18), rgba(255,255,255,0.06) 40%, transparent 60%); filter: blur(22px); opacity:0; transform: translate3d(-10%, -10%, 0) rotate(0deg) scale(1.1); border-radius:24px; transition: opacity .35s ease; }
  .uiverse-star:hover .shine{ opacity:1; animation: uistar-shine 1.6s ease-in-out infinite; }
  @keyframes uistar-shine{ 0%{ transform: translate3d(-10%, -10%, 0) rotate(0deg) scale(1.05);} 50%{ transform: translate3d(10%, 10%, 0) rotate(15deg) scale(1.15);} 100%{ transform: translate3d(-10%, -10%, 0) rotate(0deg) scale(1.05);} }
  .uiverse-star:hover{ transform: translateY(-2px) scale(1.06); }
  .uiverse-star:hover::before{ opacity:1; }
  /* Uiverse RiccardoRapelli switch */
  .switch{ position: relative; display:inline-block; width:60px; height:34px; }
  .switch #input{ opacity:0; width:0; height:0; }
  .slider{ position:absolute; cursor:pointer; top:0; left:0; right:0; bottom:0; background-color:#2196f3; transition:0.4s; z-index:0; overflow:hidden; }
  .slider.round{ border-radius:34px; }
  .slider.round .sun-moon{ border-radius:50%; }
  .sun-moon{ position:absolute; height:26px; width:26px; left:4px; bottom:4px; background-color:yellow; transition:0.4s; }
  #input:checked + .slider{ background-color:#000; }
  #input:focus + .slider{ box-shadow:0 0 1px #2196f3; }
  #input:checked + .slider .sun-moon{ transform: translateX(26px); background-color:#fff; animation: rotate-center 0.6s ease-in-out both; }
  .moon-dot{ opacity:0; transition:0.4s; fill:gray; }
  #input:checked + .slider .sun-moon .moon-dot{ opacity:1; }
  #moon-dot-1{ left:10px; top:3px; position:absolute; width:6px; height:6px; z-index:4; }
  #moon-dot-2{ left:2px; top:10px; position:absolute; width:10px; height:10px; z-index:4; }
  #moon-dot-3{ left:16px; top:18px; position:absolute; width:3px; height:3px; z-index:4; }
  .light-ray{ position:absolute; z-index:-1; fill:#fff; opacity:10%; }
  #light-ray-1{ left:-8px; top:-8px; width:43px; height:43px; }
  #light-ray-2{ left:-50%; top:-50%; width:55px; height:55px; }
  #light-ray-3{ left:-18px; top:-18px; width:60px; height:60px; }
  .cloud-light{ position:absolute; fill:#eee; animation: cloud-move 6s infinite; }
  .cloud-dark{ position:absolute; fill:#ccc; animation: cloud-move 6s infinite; animation-delay:1s; }
  #cloud-1{ left:30px; top:15px; width:40px; }
  #cloud-2{ left:44px; top:10px; width:20px; }
  #cloud-3{ left:18px; top:24px; width:30px; }
  #cloud-4{ left:36px; top:18px; width:40px; }
  #cloud-5{ left:48px; top:14px; width:20px; }
  #cloud-6{ left:22px; top:26px; width:30px; }
  @keyframes cloud-move{ 0%{ transform:translateX(0);} 40%{ transform:translateX(4px);} 80%{ transform:translateX(-4px);} 100%{ transform:translateX(0);} }
  .stars{ transform: translateY(-32px); opacity:0; transition:0.4s; }
  .star{ fill:white; position:absolute; transition:0.4s; animation: star-twinkle 2s infinite; }
  #input:checked + .slider .stars{ transform: translateY(0); opacity:1; }
  #star-1{ width:20px; top:2px; left:3px; animation-delay:0.3s; }
  #star-2{ width:6px; top:16px; left:3px; }
  #star-3{ width:12px; top:20px; left:10px; animation-delay:0.6s; }
  #star-4{ width:18px; top:0; left:18px; animation-delay:1.3s; }
  @keyframes star-twinkle{ 0%{ transform:scale(1);} 40%{ transform:scale(1.2);} 80%{ transform:scale(0.8);} 100%{ transform:scale(1);} }

  :root{ --toolbar-h: 56px; --timer-h: 280px; }
  .layout{ display:flex; gap:16px; padding:16px; align-items: stretch; height: calc(100vh - var(--toolbar-h)); overflow: hidden; }
.sidebar{ width: 300px; flex: 0 0 300px; display:grid; grid-template-rows: var(--timer-h) auto 1fr; gap:16px; height:100%; min-height:0; }
.timer-section{ height: var(--timer-h); display:flex; flex-direction:column; }
.timer-section .timer{ flex:1; min-height:0; }
.timepool-section{ flex:0 0 auto; }
.notes-section{ min-height:0; display:grid; grid-template-rows:auto 1fr; align-content:stretch; }
.notes-section .quick-notes{ align-self:center; justify-self:center; }
.section{ background: var(--panel); border:1px solid var(--border); border-radius:16px; box-shadow: var(--shadow); padding:14px; backdrop-filter: blur(14px) saturate(140%); transition: background-color .35s ease, border-color .35s ease, box-shadow .35s ease; }
  .section-title{ font-size:12px; text-transform:uppercase; letter-spacing:0.12em; color: var(--muted); margin:4px 8px 10px; }
  .project-list{ display:flex; flex-direction:column; gap:6px; }
  .project-item{ display:flex; align-items:center; justify-content:space-between; padding:8px 10px; border-radius:10px; cursor:pointer; background: transparent; color: var(--text); }
  .project-item:hover{ background: rgba(148,163,184,0.12); }
  .project-item.active{ background: rgba(122,162,255,0.15); color:#cfe1ff; }

  .notes{ width:100%; height:140px; resize:vertical; border:1px solid var(--border); border-radius:12px; padding:10px; font-size:14px; background: var(--panel-strong); color: var(--text); }
  .timer{ display:flex; flex-direction:column; gap:10px; }
.timer-dropzone{ border:2px dashed rgba(79,140,255,0.6); border-radius:14px; padding:12px; transition:border-color .2s ease, background-color .2s ease; overflow: visible; position: relative; }
.timer-dropzone.drag-over{ border-color: rgba(79,140,255,0.95); background: rgba(79,140,255,0.08); }
.timer .btn.subtle{ background:#eef2ff; border-color:#dbe4ff; }
  .timer-display{ font-variant-numeric: tabular-nums; font-size:42px; text-align:center; font-weight:600; position: relative; z-index:1; }
.timer-display[contenteditable="true"]{ outline: none; cursor:text; border-radius:10px; padding:4px 8px; }
.timer-display[contenteditable="true"]:focus{ box-shadow: 0 0 0 2px rgba(79,140,255,0.6); background: rgba(79,140,255,0.06); z-index:3; }
#timerDropHint{ position: relative; z-index:0; }
  .timer-display.small{ font-size:24px; color: var(--muted); }
.timer-actions{ display:flex; flex-direction:column; align-items:center; }
.timer-controls{ display:flex; gap:6px; justify-content:center; flex-wrap: nowrap; width:100%; }
.timer-controls.confirm{ display:none; }
.btn.icon{ display:inline-flex; justify-content:center; align-items:center; padding:0; width:40px; height:40px; }
.btn.icon .icon{ width:20px; height:20px; display:block; }
.btn.icon .icon path{ stroke-width: 2.6; }

/* Align heights in timer control row */
.timer-controls .btn{ height:40px; display:inline-flex; align-items:center; gap:8px; transition: transform .18s ease, box-shadow .18s ease, filter .18s ease, background-color .18s ease; }
.timer-controls .btn.primary{ background: var(--primary); color:#fff; border-color: var(--primary); }
.timer-controls .btn:hover{ filter: brightness(1.05); transform: translateY(-1px); box-shadow: 0 8px 18px rgba(15, 23, 42, 0.12); }
.timer-controls .btn.primary:hover{ box-shadow: 0 10px 26px rgba(79,140,255,0.35); }

/* Ensure Start button has same height */
.timer-controls .uiverse-star{ height:40px; display:inline-flex; align-items:center; padding:0 18px; }
  .select, .num{ width:100%; padding:8px 10px; border:1px solid var(--border); border-radius:10px; background: var(--panel-strong); color: var(--text); }
  .timer-controls .num{ width:auto; min-width: 88px; }
  .divider{ height:1px; background:var(--border); margin:8px 0; }
  .summary{ font-size:13px; color: #3a3a3c; opacity:0.6; text-align:center; }

/* Dark mode readability fixes */
body[data-theme="dark"] .summary{ color: var(--muted); opacity: 0.85; }
body[data-theme="dark"] #timerDropHint{ color: var(--muted); opacity: 0.9; }

/* Quick Notes editor (dark mode) */
body[data-theme="dark"] #quickNoteEditorModal #noteEditorName{
  background: rgba(30,34,46,0.9) !important;
  color: var(--text) !important;
  border-color: rgba(255,255,255,0.12) !important;
}
body[data-theme="dark"] #quickNoteEditorModal #noteEditorContent{
  background: rgba(30,34,46,0.9) !important;
  color: var(--text) !important;
  border-color: rgba(255,255,255,0.12) !important;
}

/* Schnellnotizen Uiverse icon (Tailwind-free) */
.quick-notes{ position:relative; display:flex; flex-direction:column; align-items:center; justify-content:center; width:100%; min-height:180px; }
.quick-notes .file{ position:relative; width:240px; height:160px; cursor:pointer; transform-origin:bottom; perspective:1500px; z-index:1; }
.quick-notes.small{ transform: scale(0.5); transform-origin:center; }
.quick-notes .work-5{ background:#d97706; width:100%; height:100%; transform-origin:top; border-radius:16px; border-top-left-radius:0; transition: box-shadow .3s ease; position:relative; }
.quick-notes .work-5::after{ content:""; position:absolute; bottom:99%; left:0; width:80px; height:16px; background:#d97706; border-top-left-radius:16px; border-top-right-radius:16px; }
.quick-notes .work-5::before{ content:""; position:absolute; top:-15px; left:76px; width:16px; height:16px; background:#d97706; clip-path: polygon(0 35%, 0% 100%, 50% 100%); }
.quick-notes .work-4, .quick-notes .work-3, .quick-notes .work-2{ position:absolute; inset:4px; border-radius:16px; transform-origin:bottom; transition: transform .3s ease; -webkit-backface-visibility: hidden; backface-visibility: hidden; will-change: transform; }
.quick-notes .work-4{ background:#a1a1aa; }
.quick-notes .work-3{ background:#d4d4d8; }
.quick-notes .work-2{ background:#e5e7eb; }
.quick-notes .work-1{ position:absolute; left:0; right:0; bottom:0; height:156px; background: linear-gradient(to top, #f59e0b, #fbbf24); border-bottom-left-radius:16px; border-bottom-right-radius:16px; border-top-right-radius:0; transform-origin: bottom; transition: transform .3s ease, box-shadow .3s ease; -webkit-backface-visibility: hidden; backface-visibility: hidden; }
.quick-notes .work-1::after{ content:""; position:absolute; bottom:99%; right:0; width:146px; height:16px; background:#fbbf24; border-top-left-radius:16px; border-top-right-radius:16px; }
.quick-notes .work-1::before{ content:""; position:absolute; top:-10px; right:142px; width:12px; height:12px; background:#fbbf24; clip-path: polygon(100% 14%, 50% 100%, 100% 100%); }
.quick-notes:hover .work-4{ transform: rotateX(-20deg); }
.quick-notes:hover .work-3{ transform: rotateX(-30deg); }
.quick-notes:hover .work-2{ transform: rotateX(-38deg); }
.quick-notes:hover .work-1{ box-shadow: inset 0 20px 40px #fbbf24, inset 0 -20px 40px #d97706; transform: rotateX(-46deg) translateY(1px); }
.quick-notes:hover .work-5{ box-shadow: 0 20px 40px rgba(0,0,0,.2); }
.quick-notes .hover-text{ font-size:20px; padding-top:16px; opacity:.2; }

/* Tighten vertical space for the Quick Notes section */
.notes-section{ padding-top:8px !important; padding-bottom:8px !important; -webkit-app-region: no-drag; }
.notes-section .quick-notes{ min-height:120px; -webkit-app-region: no-drag; }
.notes-section .quick-notes .file{ margin:0; -webkit-app-region: no-drag; }
/* Zeitpool */
.timepool{ margin-top: 16px; background: var(--panel-strong); border:1px solid var(--border); border-radius:14px; padding:14px; box-shadow: var(--shadow); }
.timepool-title{ font-size:12px; text-transform:uppercase; letter-spacing:0.12em; color: var(--muted); margin-bottom:8px; }
.timepool-total{ font-variant-numeric: tabular-nums; font-size:28px; font-weight:700; }
.timepool-note{ font-size:12px; color: var(--muted); }

  .board{ flex:1; display:flex; flex-direction:column; gap:12px; height:100%; min-height:0; }
  .board-header{ background: var(--panel-strong); border:1px solid var(--border); border-radius:20px; box-shadow: var(--shadow); padding:14px; backdrop-filter: blur(12px) saturate(140%); transition: background-color .35s ease, border-color .35s ease, box-shadow .35s ease; }
  .new-task-input{ width:100%; padding:12px 14px; font-size:14px; border:1px solid var(--border); border-radius:12px; transition: background-color .35s ease, color .35s ease, border-color .35s ease; }
  .columns{ display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; height:100%; min-height:0; }
  /* Uiverse (Pravins01) inspired gradient aura for columns (To Do / Doing / Done) */
  .column{ position:relative; background: #0b0d12; border:1px solid rgba(255,255,255,0.08); border-radius:14px; padding:16px; height:100%; min-height:0; display:flex; flex-direction:column; gap:12px; overflow:hidden; }
  body[data-theme="light"] .column{ background:#ffffff; border-color: rgba(0,0,0,0.06); }
  /* Aura underlay behind column content (Mohammedswisse style, scaled on hover) */
  .column::before{ content:""; position:absolute; inset:0; border-radius: inherit; background: linear-gradient(-45deg, #4f8cff 0%, #40c9ff 100% ); z-index:-10; pointer-events:none; transform: translateZ(0) scale(1); opacity: .12; transition: opacity .25s ease; }
  .column::after{ content:""; position:absolute; inset:0; border-radius: inherit; z-index:-1; background: linear-gradient(-45deg, #4f8cff 0%, #00dbde 100% ); pointer-events:none; transform: translateZ(0) scale(1); filter: blur(16px); opacity: .08; transition: opacity .25s ease, filter .25s ease; }
  .column:hover::before{ opacity: .18; }
  .column:hover::after{ opacity: .12; filter: blur(20px); }
  .column-title{ font-weight:800; font-size:13px; letter-spacing:0.14em; text-transform:uppercase; opacity:.85; margin:2px 2px 6px; }
  .column-list{ flex:1 1 auto; min-height:0; display:flex; flex-direction:column; gap:8px; overflow:auto; }
  #todoList, #doingList, #doneList{ flex:1 1 auto; min-height:0; overflow:auto; }

  /* Custom scrollbars for task columns */
  .column-list::-webkit-scrollbar,
  #todoList::-webkit-scrollbar,
  #doingList::-webkit-scrollbar,
  #doneList::-webkit-scrollbar {
    width: 6px;
  }

  .column-list::-webkit-scrollbar-track,
  #todoList::-webkit-scrollbar-track,
  #doingList::-webkit-scrollbar-track,
  #doneList::-webkit-scrollbar-track {
    background: transparent;
    border-radius: 10px;
  }

  .column-list::-webkit-scrollbar-thumb,
  #todoList::-webkit-scrollbar-thumb,
  #doingList::-webkit-scrollbar-thumb,
  #doneList::-webkit-scrollbar-thumb {
    background: rgba(79,140,255,0.3);
    border-radius: 10px;
    border: 1px solid rgba(79,140,255,0.1);
  }

  .column-list::-webkit-scrollbar-thumb:hover,
  #todoList::-webkit-scrollbar-thumb:hover,
  #doingList::-webkit-scrollbar-thumb:hover,
  #doneList::-webkit-scrollbar-thumb:hover {
    background: rgba(79,140,255,0.5);
    border-color: rgba(79,140,255,0.2);
  }

  .column-list::-webkit-scrollbar-thumb:active,
  #todoList::-webkit-scrollbar-thumb:active,
  #doingList::-webkit-scrollbar-thumb:active,
  #doneList::-webkit-scrollbar-thumb:active {
    background: var(--primary);
  }

  /* Firefox scrollbar support */
  .column-list,
  #todoList, #doingList, #doneList {
    scrollbar-width: thin;
    scrollbar-color: rgba(79,140,255,0.3) transparent;
  }

  /* Uiverse (Pravins01) inspired gradient aura cards */
  .card{ position:relative; z-index:0; background: #0b0d12; color:#eaecef; border:1px solid rgba(255,255,255,0.08); border-radius:12px; padding:12px; cursor:grab; overflow:hidden; transition: background-color .25s ease, border-color .25s ease, color .25s ease, box-shadow .25s ease; flex: 0 0 auto; }
  .card > *{ position: relative; z-index: 1; }
  body[data-theme="light"] .card{ background:#ffffff; color:#0f172a; border-color: rgba(0,0,0,0.06); }
  .card:active{ cursor:grabbing; }
  .card::before{ content:""; position:absolute; inset:0; border-radius:inherit; background: linear-gradient(-45deg, #4f8cff 0%, #40c9ff 100%); z-index:0; pointer-events:none; opacity:0.24; }
  .card::after{ content:""; position:absolute; inset:0; border-radius:inherit; background: linear-gradient(-45deg, #4f8cff 0%, #00dbde 100% ); filter: blur(14px); z-index:0; opacity:0.12; }
  .card:hover::after{ filter: blur(20px); opacity:0.12; }
  .card:hover::before{ opacity:0.24; }
  .card-title{ font-size:15px; font-weight:700; margin-bottom:8px; letter-spacing:0.2px; }
  .card-notes{ font-size:12px; color: var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .card-actions{ display:flex; gap:8px; margin-top:12px; flex-wrap: wrap; }
  /* Clean action buttons on cards */
  .card .btn{ padding:6px 10px; font-size:12px; border-radius:8px; background: rgba(148,163,184,0.15); border-color: rgba(148,163,184,0.25); }
  .card .btn:hover{ filter:none; background: rgba(148,163,184,0.25); }
  .badge{ font-size:10px; color:#cbd5e1; background:rgba(148,163,184,0.18); padding:2px 6px; border-radius:999px; }

/* subtle hover lift */
.card{ transition: background-color .25s ease, border-color .25s ease, color .25s ease; box-shadow: none !important; }
/* stable hover tint (reduced to avoid theme-switch flicker) */
.card:hover{ background: linear-gradient(0deg, rgba(79,140,255,0.04), rgba(79,140,255,0.04)), var(--panel-strong); border-color: rgba(79,140,255,0.22); }
body[data-theme="dark"] .card:hover{ background: rgba(255,255,255,0.02); border-color: rgba(106,155,255,0.22); }

  .btn{ appearance:none; border:1px solid var(--border); background: var(--panel-strong); padding:8px 12px; border-radius:10px; font-size:13px; cursor:pointer; color: var(--text); box-shadow:none; }
  .btn:hover{ filter:brightness(1.05); }
  .btn.primary{ background: var(--primary); color:#fff; border-color: rgba(0,0,0,0.0); }
  .btn.danger{ background:#ef4444; color:#fff; border-color:#ef4444; }
  .btn.subtle{ background: rgba(148,163,184,0.15); color: var(--text); border-color: rgba(148,163,184,0.2); }
  .btn.full{ width:100%; }
  .input{ width:100%; background: var(--panel-strong); color: var(--text); border:1px solid var(--border); border-radius:12px; padding:10px 12px; font-size:14px; box-shadow:none; }
  .input:focus{ outline:none; box-shadow: 0 0 0 2px rgba(79,140,255,0.35); }
  .label{ font-size:12px; color: var(--muted); margin-top:8px; display:block; }

.modal{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,0.0); z-index: 9999999; backdrop-filter:blur(0px); }
  .modal.hidden{ display:none; }
.modal:not(.hidden){ animation: modalBackdropIn .38s ease both; }
.modal.closing{ animation: modalBackdropOut .28s ease both; }
@keyframes modalBackdropIn{ from{ background: rgba(0,0,0,0.0); backdrop-filter: blur(0px); } to{ background: rgba(0,0,0,0.6); backdrop-filter: blur(10px); } }
@keyframes modalBackdropOut{ from{ background: rgba(0,0,0,0.6); backdrop-filter: blur(10px); } to{ background: rgba(0,0,0,0.0); backdrop-filter: blur(0px); } }
  .modal-content{ position:relative; overflow:hidden; width:560px; background: radial-gradient(120% 120% at 0% 0%, rgba(79,140,255,0.06), transparent 55%), #ffffff; border:1px solid rgba(0,0,0,0.06); border-radius:20px; box-shadow: 0 30px 80px rgba(0,0,0,0.5); padding:22px; color:#0f172a; }
  /* Task modal refinements */
  .task-modal .modal-content{ width:520px; padding:20px 20px 18px; border-radius:18px; }
  .task-modal h2{ margin:0 0 12px; font-size:18px; font-weight:700; letter-spacing:.2px; }
  /* Spacing rhythm: small gap label->input, larger gap input->next label */
  .task-modal .label{ margin:0; font-size:12px; color:#64748b; }
  .task-modal h2 + .label{ margin-top:12px; }

  /* Constrain modal content height globally to avoid oversized popups */
  .modal .modal-content{ max-height: 80vh; display:flex; flex-direction: column; }

  /* Quick Notes modal: make list scroll within fixed modal */
  #quickNotesModal .modal-content{ max-height: 70vh; }
  #mainQuickNotesList{ flex:1; min-height:0; overflow-y:auto; padding-right: 8px; }

  /* Editor modal content also constrained */
  #quickNoteEditorModal .modal-content{ max-height: 75vh; display:flex; flex-direction: column; }
  #noteEditorContent{ max-height: 45vh; overflow-y:auto; }
  .task-modal .label + .input,
  .task-modal .label + textarea{ margin-top:6px; }
  .task-modal .input + .label,
  .task-modal textarea + .label{ margin-top:14px; }
  .task-modal .input{ background:#f8fafc; border-color:#e5e7eb; }
  .task-modal .input:focus{ box-shadow:0 0 0 2px rgba(79,140,255,0.35); border-color:#c7d2fe; background:#ffffff; }
  .task-modal textarea.input{ height:130px; overflow:auto; resize: none; }
  body[data-theme="dark"] .task-modal .modal-content{ background: var(--panel-strong); border-color: var(--border); color: var(--text); }
  body[data-theme="dark"] .task-modal .label{ color: var(--muted); }
  body[data-theme="dark"] .task-modal .input{ background: rgba(30,34,46,0.8); border-color: rgba(255,255,255,0.08); color: var(--text); }
  body[data-theme="dark"] .task-modal .input:focus{ box-shadow:0 0 0 2px rgba(106,155,255,0.35); border-color: rgba(106,155,255,0.45); background: rgba(30,34,46,0.95); }
  body[data-theme="dark"] .modal-content{
    background: radial-gradient(120% 120% at 0% 0%, rgba(79,140,255,0.08), transparent 55%), var(--panel-strong);
    border-color: var(--border);
    color: var(--text);
  }
  .modal-actions{ display:flex; justify-content:flex-start; gap:10px; margin-top:12px; }
  .modal .btn.primary{ background:#4f8cff; border-color:#4f8cff; color:#fff; }
  .modal .btn.primary:hover{ filter: brightness(1.05); }

  /* About modal footer with credit + torch */
  .about-footer{ margin-top:10px; display:flex; align-items:center; justify-content:space-between; gap:12px; }
  .about-credit{ font-size:13px; opacity:.85; background: rgba(79,140,255,0.12); color: var(--text); border:1px solid rgba(79,140,255,0.25); padding:6px 10px; border-radius:999px; }
  .torch-widget{ display:flex; align-items:center; justify-content:flex-end; }
  .about-bubbles{ position:absolute; inset:-40px; z-index:0; opacity:.55; pointer-events:none; }
  .about-torch{ position:absolute; right:24px; bottom:6px; z-index:2; filter: none; }
  .modal-content > *:not(.about-bubbles):not(.about-torch){ position:relative; z-index:1; }
  .torch-container{ display:flex; flex-direction:column; align-items:center; position:relative; cursor:pointer; user-select:none; transform: scale(0.8); transform-origin:right bottom; }
  .torch-container input{ position:absolute; opacity:0; height:0; width:0; }
  .torch{ display:flex; justify-content:center; height:120px; }
  .torch .head, .torch .stick{ position:absolute; width:26px; transform-style:preserve-3d; transform: rotateX(-30deg) rotateY(45deg); }
  .torch .stick{ position:relative; height:96px; }
  .torch .face{ position:absolute; transform-style:preserve-3d; width:26px; height:26px; display:grid; grid-template-columns:50% 50%; grid-template-rows:50% 50%; background:#000; }
  .torch .top{ transform: rotateX(90deg) translateZ(13px); }
  .torch .left{ transform: rotateY(-90deg) translateZ(13px); }
  .torch .right{ transform: rotateY(0deg) translateZ(13px); }
  .torch .top div, .torch .left div, .torch .right div{ width:102%; height:102%; }
  .torch .top div:nth-child(1), .torch .left div:nth-child(3), .torch .right div:nth-child(3){ background-color:#ffff9760; }
  .torch .top div:nth-child(2), .torch .left div:nth-child(1), .torch .right div:nth-child(1){ background-color:#ffd80060; }
  .torch .top div:nth-child(3), .torch .left div:nth-child(4), .torch .right div:nth-child(4){ background-color:#ffffff60; }
  .torch .top div:nth-child(4), .torch .left div:nth-child(2), .torch .right div:nth-child(2){ background-color:#ff8f0060; }
  .torch .side{ position:absolute; width:26px; height:96px; display:grid; grid-template-columns:50% 50%; grid-template-rows:repeat(8, 12.5%); translate:0 12px; }
  .torch .side-left{ transform: rotateY(-90deg) translateZ(13px) translateY(8px); }
  .torch .side-right{ transform: rotateY(0deg) translateZ(13px) translateY(8px); }
  .torch .side-left div, .torch .side-right div{ width:103%; height:103%; }
  .torch .side div:nth-child(1){ background-color:#443622; }
  .torch .side div:nth-child(2){ background-color:#2e2517; }
  .torch .side div:nth-child(3), .torch .side div:nth-child(5){ background-color:#4b3b23; }
  .torch .side div:nth-child(4), .torch .side div:nth-child(10){ background-color:#251e12; }
  .torch .side div:nth-child(6){ background-color:#292115; }
  .torch .side div:nth-child(7){ background-color:#4b3c26; }
  .torch .side div:nth-child(8){ background-color:#292115; }
  .torch .side div:nth-child(9){ background-color:#4b3a21; }
  .torch .side div:nth-child(11), .torch .side div:nth-child(15){ background-color:#3d311d; }
  .torch .side div:nth-child(12){ background-color:#2c2315; }
  .torch .side div:nth-child(13){ background-color:#493a22; }
  .torch .side div:nth-child(14){ background-color:#2b2114; }
  .torch .side div:nth-child(16){ background-color:#271e10; }
  .torch-container input:checked ~ .torch .face{ filter: drop-shadow(0 0 2px #fff) drop-shadow(0 0 10px rgba(255,237,156,0.7)) drop-shadow(0 0 25px rgba(255,227,101,0.4)); }
  .torch-container input:checked ~ .torch .top div:nth-child(1), .torch-container input:checked ~ .torch .left div:nth-child(3), .torch-container input:checked ~ .torch .right div:nth-child(3){ background-color:#ffff97; }
  .torch-container input:checked ~ .torch .top div:nth-child(2), .torch-container input:checked ~ .torch .left div:nth-child(1), .torch-container input:checked ~ .torch .right div:nth-child(1){ background-color:#ffd800; }
  .torch-container input:checked ~ .torch .top div:nth-child(3), .torch-container input:checked ~ .torch .left div:nth-child(4), .torch-container input:checked ~ .torch .right div:nth-child(4){ background-color:#ffffff; }
  .torch-container input:checked ~ .torch .top div:nth-child(4), .torch-container input:checked ~ .torch .left div:nth-child(2), .torch-container input:checked ~ .torch .right div:nth-child(2){ background-color:#ff8f00; }

  /* Uiverse Dennyhml bubbles */
  .bubble{ position:absolute; width:200px; height:200px; border-radius:50%; box-shadow: inset 0 0 25px rgba(255,255,255,0.25); animation: animate_4010 8s ease-in-out infinite; }
  .bubble:nth-child(2){ position:relative; zoom:.45; left:-10px; top:-100px; animation-delay:-4s; }
  .bubble:nth-child(3){ position:relative; zoom:.45; right:-80px; top:-300px; animation-delay:-6s; }
  .bubble:nth-child(4){ position:relative; zoom:.35; left:-120px; bottom:-200px; animation-delay:-3s; }
  .bubble:nth-child(5){ position:relative; zoom:.5; left:0px; top:200px; animation-delay:-5s; }
  @keyframes animate_4010{ 0%,100%{ transform: translateY(-20px); } 50%{ transform: translateY(20px);} }
  .bubble::before{ content:""; position:absolute; top:50px; left:45px; width:30px; height:30px; border-radius:50%; background:#fff; z-index:10; filter: blur(2px); }
  .bubble::after{ content:""; position:absolute; top:80px; left:80px; width:20px; height:20px; border-radius:50%; background:#fff; z-index:10; filter: blur(2px); }
  .bubble span{ position:absolute; border-radius:50%; }
  .bubble span:nth-child(1){ inset:10px; border-left:15px solid #4f8cff; filter: blur(8px); }
  .bubble span:nth-child(2){ inset:10px; border-right:15px solid #6aa3ff; filter: blur(8px); }
  .bubble span:nth-child(3){ inset:10px; border-top:15px solid #a8c7ff; filter: blur(8px); }
  .bubble span:nth-child(4){ inset:30px; border-left:15px solid #6aa3ff; filter: blur(12px); }
  .bubble span:nth-child(5){ inset:10px; border-bottom:10px solid #e6f0ff; filter: blur(8px); transform: rotate(330deg); }

  .column-list.drag-over{ outline:2px dashed rgba(122,162,255,0.65); outline-offset: -6px; }

  /* Background canvas */
  #bg{ display:none; }
  body > header, body > main{ position: relative; z-index: 1; }


/* Global dim backdrop for spotlight effect */
/* dim backdrop removed */

/* Keep Start button and its stars above the dim backdrop */
.uiverse-star.spotlight{ position: relative; z-index: 1001; }
.uiverse-star.spotlight .star-1,
.uiverse-star.spotlight .star-2,
.uiverse-star.spotlight .star-3,
.uiverse-star.spotlight .star-4,
.uiverse-star.spotlight .star-5,
.uiverse-star.spotlight .star-6{ z-index: 1002; filter: drop-shadow(0 0 14px rgba(79,140,255,0.95)); }

  /* Uiverse star button (MuhammadHasann) */
  .uiverse-star{ position:relative; padding:12px 28px; background: var(--primary); font-size:16px; font-weight:600; color:#ffffff; border:2px solid var(--primary); border-radius:10px; box-shadow:none; transition: all .25s ease-in-out; cursor:pointer; }
  .uiverse-star::after{ content:""; position:absolute; inset:-10px; border-radius:14px; background: radial-gradient(closest-corner, rgba(79,140,255,0.4), rgba(79,140,255,0.12), transparent 70%); opacity:0; filter: blur(16px); z-index:-1; transition: opacity .25s ease, filter .25s ease; }
  .uiverse-star .fil0{ fill:#fffdef; }
  .uiverse-star .star-1, .uiverse-star .star-2, .uiverse-star .star-3, .uiverse-star .star-4, .uiverse-star .star-5, .uiverse-star .star-6{ position:absolute; filter: drop-shadow(0 0 0 #fffdef); z-index:-5; opacity: 0; transition: opacity .2s ease; }
  .uiverse-star .star-1{ top:20%; left:20%; width:25px; transition: all 1s cubic-bezier(0.05, 0.83, 0.43, 0.96); }
  .uiverse-star .star-2{ top:45%; left:45%; width:15px; transition: all 1s cubic-bezier(0, 0.4, 0, 1.01); }
  .uiverse-star .star-3{ top:40%; left:40%; width:5px; transition: all 1s cubic-bezier(0, 0.4, 0, 1.01); }
  .uiverse-star .star-4{ top:20%; left:40%; width:8px; transition: all .8s cubic-bezier(0, 0.4, 0, 1.01); }
  .uiverse-star .star-5{ top:25%; left:45%; width:15px; transition: all .6s cubic-bezier(0, 0.4, 0, 1.01); }
  .uiverse-star .star-6{ top:5%; left:50%; width:5px; transition: all .8s ease; }
  .uiverse-star:hover{ background: transparent; color: var(--primary); box-shadow:0 0 120px rgba(79,140,255,0.9), 0 0 200px rgba(79,140,255,0.55); transform: translateY(-1px) scale(1.05); }
  .uiverse-star:hover::after{ opacity:1; filter: blur(40px); }

  /* Unified input style (clean, theme-aware) */
  .input{ width:100%; background: var(--panel-strong); color: var(--text); border:1px solid var(--border); border-radius:12px; padding:10px 12px; font-size:14px; box-shadow:none; }
  .input:focus{ outline:none; box-shadow: 0 0 0 2px rgba(79,140,255,0.35); }
  .uiverse-star:hover .star-1{ top:-80%; left:-30%; filter: drop-shadow(0 0 18px rgba(79,140,255,0.9)); z-index:2; opacity: 1; }
  .uiverse-star:hover .star-2{ top:-25%; left:10%; filter: drop-shadow(0 0 18px rgba(79,140,255,0.9)); z-index:2; opacity: 1; }
  .uiverse-star:hover .star-3{ top:55%; left:25%; filter: drop-shadow(0 0 18px rgba(79,140,255,0.9)); z-index:2; opacity: 1; }
  .uiverse-star:hover .star-4{ top:30%; left:80%; filter: drop-shadow(0 0 18px rgba(79,140,255,0.9)); z-index:2; opacity: 1; }
  .uiverse-star:hover .star-5{ top:25%; left:115%; filter: drop-shadow(0 0 18px rgba(79,140,255,0.9)); z-index:2; opacity: 1; }
  .uiverse-star:hover .star-6{ top:5%; left:60%; filter: drop-shadow(0 0 18px rgba(79,140,255,0.9)); z-index:2; opacity: 1; }

  /* Remove hover stars for Start button */
  .uiverse-star .star-1,
  .uiverse-star .star-2,
  .uiverse-star .star-3,
  .uiverse-star .star-4,
  .uiverse-star .star-5,
  .uiverse-star .star-6{ display:none !important; }

  /* Light mode: colorize hover stars so they are visible on light background */
  body[data-theme="light"] .uiverse-star .fil0{ fill: #4f8cff; }
  body[data-theme="light"] .uiverse-star .star-1,
  body[data-theme="light"] .uiverse-star .star-2,
  body[data-theme="light"] .uiverse-star .star-3,
  body[data-theme="light"] .uiverse-star .star-4,
  body[data-theme="light"] .uiverse-star .star-5,
  body[data-theme="light"] .uiverse-star .star-6{ filter: drop-shadow(0 0 0 rgba(79,140,255,0)); }
  body[data-theme="light"] .uiverse-star:hover .star-1,
  body[data-theme="light"] .uiverse-star:hover .star-2,
  body[data-theme="light"] .uiverse-star:hover .star-3,
  body[data-theme="light"] .uiverse-star:hover .star-4,
  body[data-theme="light"] .uiverse-star:hover .star-5,
  body[data-theme="light"] .uiverse-star:hover .star-6{ filter: drop-shadow(0 0 10px rgba(79,140,255,0.9)); }

/* Consistent blue focus outline for inputs/selects */
input:focus, select:focus, textarea:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(79,140,255,0.35);
  border-color: #4f8cff;
}

/* Timer task select specific if needed */
#timerTaskSelect:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(79,140,255,0.35);
  border-color: #4f8cff;
}

/* Celebration modal */
.celebrate-modal{ max-width: 520px; display:flex; flex-direction:column; gap:10px; align-items:center; justify-content:center; text-align:center; position:relative; overflow:hidden; margin:auto; min-height: 360px; }
.celebrate-modal .icon{ width:48px; height:48px; }
.celebrate-icon{ width:88px; height:88px; border-radius:999px; display:grid; place-items:center; color: var(--primary); background: radial-gradient(120% 120% at 30% 10%, rgba(79,140,255,0.15), transparent 60%); box-shadow: 0 10px 40px rgba(79,140,255,0.25); margin-bottom:8px; position:relative; z-index:10; }
.celebrate-title{ margin:8px 0 6px; font-size:22px; font-weight:700; position:relative; z-index:10; }
.celebrate-text{ margin:0; font-size:14px; opacity:0.9; position:relative; z-index:10; }
.celebrate-sub{ margin:6px 0 0; font-size:13px; opacity:0.8; position:relative; z-index:10; }
.celebrate-actions{ margin-top:10px; position:relative; z-index:10; }
.confetti-canvas{ position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1; }

/* Update Modal Styles */
.progress-bar {
  width: 100%;
  height: 8px;
  background: var(--bg-secondary);
  border-radius: 4px;
  overflow: hidden;
  margin: 1rem 0;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #4f8cff, #1e40af);
  border-radius: 4px;
  transition: width 0.3s ease;
  width: 0%;
}

#updateDetails {
  margin: 1rem 0;
}

#updateProgress {
  margin-top: 1rem;
}

#progressText {
  font-size: 0.9rem;
  color: var(--text-secondary);
  text-align: center;
  margin: 0.5rem 0;
}
