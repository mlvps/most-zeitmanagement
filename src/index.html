<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MO:ST Zeitmanagement</title>
  <link rel="icon" href="assets/icon.png" />
  <link rel="stylesheet" href="styles.css" />

</head>
<body>
  <!-- removed animated background -->
  <div id="themeFade" style="position:fixed; inset:0; background:#000; opacity:0; pointer-events:none; transition: opacity .35s ease; z-index: 9999;"></div>
  <!-- Focus intro overlay removed -->
  <header class="toolbar">
    <div class="window-drag-region"></div>
    <div class="toolbar-center">
      <input id="search" class="search input" placeholder="Aufgaben suchen (⌘F)" />
    </div>
    <div class="toolbar-right">
      <!-- Uiverse (RiccardoRapelli) theme switch -->
      <label class="switch" title="Theme umschalten">
        <input id="input" type="checkbox" />
        <div class="slider round">
          <div class="sun-moon">
            <svg id="moon-dot-1" class="moon-dot" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="moon-dot-2" class="moon-dot" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="moon-dot-3" class="moon-dot" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="light-ray-1" class="light-ray" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="light-ray-2" class="light-ray" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="light-ray-3" class="light-ray" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="cloud-1" class="cloud-dark" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="cloud-2" class="cloud-dark" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="cloud-3" class="cloud-dark" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="cloud-4" class="cloud-light" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="cloud-5" class="cloud-light" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
            <svg id="cloud-6" class="cloud-light" viewBox="0 0 100 100"><circle cx="50" cy="50" r="50"></circle></svg>
          </div>
          <div class="stars">
            <svg id="star-1" class="star" viewBox="0 0 20 20"><path d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"></path></svg>
            <svg id="star-2" class="star" viewBox="0 0 20 20"><path d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"></path></svg>
            <svg id="star-3" class="star" viewBox="0 0 20 20"><path d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"></path></svg>
            <svg id="star-4" class="star" viewBox="0 0 20 20"><path d="M 0 10 C 10 10,10 10 ,0 10 C 10 10 , 10 10 , 10 20 C 10 10 , 10 10 , 20 10 C 10 10 , 10 10 , 10 0 C 10 10,10 10 ,0 10 Z"></path></svg>
          </div>
        </div>
      </label>
      <!-- Uiverse (JkHuger) sparkle button as New Task -->
      <div class="sp">
        <button id="newTaskBtn" class="sparkle-button" aria-label="Neue Aufgabe">
          <span class="spark"></span>
          <span class="backdrop"></span>
          <svg class="sparkle" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.187 8.096L15 5.25L15.813 8.096C16.0231 8.83114 16.4171 9.50062 16.9577 10.0413C17.4984 10.5819 18.1679 10.9759 18.903 11.186L21.75 12L18.904 12.813C18.1689 13.0231 17.4994 13.4171 16.9587 13.9577C16.4181 14.4984 16.0241 15.1679 15.814 15.903L15 18.75L14.187 15.904C13.9769 15.1689 13.5829 14.4994 13.0423 13.9587C12.5016 13.4181 11.8321 13.0241 11.097 12.814L8.25 12L11.096 11.187C11.8311 10.9769 12.5006 10.5829 13.0413 10.0423C13.5819 9.50162 13.9759 8.83214 14.186 8.097L14.187 8.096Z" fill="black" stroke="black" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M6 14.25L5.741 15.285C5.59267 15.8785 5.28579 16.4206 4.85319 16.8532C4.42059 17.2858 3.87853 17.5927 3.285 17.741L2.25 18L3.285 18.259C3.87853 18.4073 4.42059 18.7142 4.85319 19.1468C5.28579 19.5794 5.59267 20.1215 5.741 20.715L6 21.75L6.259 20.715C6.40725 20.1216 6.71398 19.5796 7.14639 19.147C7.5788 18.7144 8.12065 18.4075 8.714 18.259L9.75 18L8.714 17.741C8.12065 17.5925 7.5788 17.2856 7.14639 16.853C6.71398 16.4204 6.40725 15.8784 6.259 15.285L6 14.25Z" fill="black" stroke="black" stroke-linecap="round" stroke-linejoin="round"></path>
            <path d="M6.5 4L6.303 4.5915C6.24777 4.75718 6.15472 4.90774 6.03123 5.03123C5.90774 5.15472 5.75718 5.24777 5.5915 5.303L5 5.5L5.5915 5.697C5.75718 5.75223 5.90774 5.84528 6.03123 5.96877C6.15472 6.09226 6.24777 6.24282 6.303 6.4085L6.5 7L6.697 6.4085C6.75223 6.24282 6.84528 6.09226 6.96877 5.96877C7.09226 5.84528 7.24282 5.75223 7.4085 5.697L8 5.5L7.4085 5.303C7.24282 5.24777 7.09226 5.15472 6.96877 5.03123C6.84528 4.90774 6.75223 4.75718 6.697 4.5915L6.5 4Z" fill="black" stroke="black" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
          <span class="text">Neue Aufgabe</span>
        </button>
        <div class="bodydrop"></div>
        <span aria-hidden="true" class="particle-pen">
          <svg class="particle" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.937 3.846L7.75 1L8.563 3.846C8.77313 4.58114 9.1671 5.25062 9.70774 5.79126C10.2484 6.3319 10.9179 6.72587 11.653 6.936L14.5 7.75L11.654 8.563C10.9189 8.77313 10.2494 9.1671 9.70874 9.70774C9.1681 10.2484 8.77413 10.9179 8.564 11.653L7.75 14.5L6.937 11.654C6.72687 10.9189 6.3329 10.2494 5.79226 9.70874C5.25162 9.1681 4.58214 8.77413 3.847 8.564L1 7.75L3.846 6.937C4.58114 6.72687 5.25062 6.3329 5.79126 5.79226C6.3319 5.25162 6.72587 4.58214 6.936 3.847L6.937 3.846Z" fill="black" stroke="black" stroke-linecap="round" stroke-linejoin="round"></path></svg>
          <svg class="particle" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.937 3.846L7.75 1L8.563 3.846C8.77313 4.58114 9.1671 5.25062 9.70774 5.79126C10.2484 6.3319 10.9179 6.72587 11.653 6.936L14.5 7.75L11.654 8.563C10.9189 13.0231 17.4994 13.4171 16.9587 13.9577C16.4181 14.4984 16.0241 15.1679 15.814 15.903L15 18.75L14.187 15.904C13.9769 15.1689 13.5829 14.4994 13.0423 13.9587C12.5016 13.4181 11.8321 13.0241 11.097 12.814L8.25 12L11.096 11.187C11.8311 10.9769 12.5006 10.5829 13.0413 10.0423C13.5819 9.50162 13.9759 8.83214 14.186 8.097L14.187 8.096Z" fill="black" stroke="black" stroke-linecap="round" stroke-linejoin="round"></path></svg>
          <svg class="particle" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.937 3.846L7.75 1L8.563 3.846C8.77313 4.58114 9.1671 5.25062 9.70774 5.79126C10.2484 6.3319 10.9179 6.72587 11.653 6.936L14.5 7.75L11.654 8.563C10.9189 13.0231 17.4994 13.4171 16.9587 13.9577C16.4181 14.4984 16.0241 15.1679 15.814 15.903L15 18.75L14.187 15.904C13.9769 15.1689 13.5829 14.4994 13.0423 13.9587C12.5016 13.4181 11.8321 13.0241 11.097 12.814L8.25 12L11.096 11.187C11.8311 10.9769 12.5006 10.5829 13.0413 10.0423C13.5819 9.50162 13.9759 8.83214 14.186 8.097L14.187 8.096Z" fill="black" stroke="black" stroke-linecap="round" stroke-linejoin="round"></path></svg>
        </span>
      </div>
    </div>
    <div class="toolbar-end">
      <button id="infoBtn" class="icon-only" aria-label="Info" title="Info">
        <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.8"/>
          <path d="M12 10.25v6.25" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          <circle cx="12" cy="7.25" r="1.4" fill="currentColor"/>
        </svg>
      </button>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">

      <div class="section timer-section">
        <div class="section-title">Focus Timer</div>
        <div class="timer">
          <div id="timerDropZone" class="timer-dropzone" aria-label="Aufgabe hierher ziehen">
            <div class="timer-row">
              <select id="timerTaskSelect" class="select"></select>
            </div>
            <div class="timer-display" id="countdownDisplay" contenteditable="true" role="textbox" aria-label="Timer bearbeiten">25:00</div>
            <div id="timerDropHint" class="summary">Aufgabe hierher ziehen, um den Timer zu verknüpfen</div>
          </div>
          <div class="timer-actions">
          <div class="timer-controls">
            <button id="startCountdown" class="uiverse-star" aria-label="Fokus starten">
              Starten
              <span class="shine"></span>
              <div class="star-1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 784.11 815.53"><path class="fil0" d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"/></svg>
              </div>
              <div class="star-2">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 784.11 815.53"><path class="fil0" d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"/></svg>
              </div>
              <div class="star-3">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 784.11 815.53"><path class="fil0" d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"/></svg>
              </div>
              <div class="star-4">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 784.11 815.53"><path class="fil0" d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"/></svg>
              </div>
              <div class="star-5">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 784.11 815.53"><path class="fil0" d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"/></svg>
              </div>
              <div class="star-6">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 784.11 815.53"><path class="fil0" d="M392.05 0c-20.9,210.08 -184.06,378.41 -392.05,407.78 207.96,29.37 371.12,197.68 392.05,407.74 20.93,-210.06 184.09,-378.37 392.05,-407.74 -207.98,-29.38 -371.16,-197.69 -392.06,-407.78z"/></svg>
              </div>
            </button>
            <button id="resetCountdown" class="btn">Reset</button>
            <button id="confirmTime" class="btn primary icon" aria-label="Bestätigen">
              <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <path d="M20 7L9 18L4 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          </div>
        </div>
      </div>

      <!-- Zeitpool unter dem Focus Timer -->
      <div class="section timepool-section">
        <div class="section-title" style="display:flex; align-items:center; justify-content:space-between; gap:8px;">
          <span>Zeitpool</span>
          <button id="openAnalytics" class="icon-only" aria-label="Analytics" title="Analytics" style="-webkit-app-region: no-drag;">
            <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path d="M4 19H20" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity="0.4"/>
              <path d="M4 5V19" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity="0.4"/>
              <path d="M6 14L11 9L14 12L20 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="11" cy="9" r="1.5" fill="currentColor"/>
              <circle cx="14" cy="12" r="1.5" fill="currentColor"/>
              <circle cx="20" cy="6" r="1.5" fill="currentColor"/>
            </svg>
          </button>
        </div>
        <div class="timepool">
          <div id="timePoolTotal" class="timepool-total">00:00:00</div>
          <div id="timePoolNote" class="timepool-note">Bestätigte Arbeitszeit</div>
        </div>
      </div>

      <!-- Schnellnotizen (Icon-only preview) -->
      <div class="section notes-section">
        <div class="section-title">Schnellnotizen</div>
        <section class="quick-notes group small" aria-label="Schnellnotizen Vorschau" id="quickNotesIcon" style="cursor: pointer; -webkit-app-region: no-drag; pointer-events: auto; user-select: none;">
          <div class="file">
            <div class="work-5"></div>
            <div class="work-4"></div>
            <div class="work-3"></div>
            <div class="work-2"></div>
            <div class="work-1"></div>
          </div>
        </section>
      </div>

    </aside>

    <section class="board">
        <div class="board-header">
          <input id="newTaskInput" class="new-task-input input" placeholder="Aufgabe hinzufügen und mit Enter bestätigen…" />
        </div>
      <div class="columns">
        <div class="column" data-status="todo">
          <div class="column-title">Zu tun</div>
          <div class="column-list" id="todoList"></div>
        </div>
        <div class="column" data-status="doing">
          <div class="column-title">In Arbeit</div>
          <div class="column-list" id="doingList"></div>
        </div>
        <div class="column" data-status="done">
          <div class="column-title">Erledigt</div>
          <div class="column-list" id="doneList"></div>
        </div>
      </div>
    </section>
  </main>

  <div id="modal" class="modal hidden task-modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <h2 id="modalTitle">Neue Aufgabe</h2>
      <label class="label" for="taskTitle">Titel</label>
      <input id="taskTitle" class="input" placeholder="Aufgabentitel" />
      <label class="label" for="taskNotes">Notizen</label>
      <textarea id="taskNotes" class="input" rows="4" placeholder="Optionale Notizen…"></textarea>
      <div class="modal-actions">
        <button id="saveTask" class="btn primary">Speichern</button>
        <button id="cancelTask" class="btn">Abbrechen</button>
      </div>
    </div>
  </div>

  <!-- About / Info Modal -->
  <div id="aboutModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content">
      <!-- Decorative bubbles background -->
      <div class="about-bubbles" aria-hidden="true">
        <div class="bubble"><span></span><span></span><span></span><span></span><span></span></div>
        <div class="bubble"><span></span><span></span><span></span><span></span><span></span></div>
        <div class="bubble"><span></span><span></span><span></span><span></span><span></span></div>
        <div class="bubble"><span></span><span></span><span></span><span></span><span></span></div>
        <div class="bubble"><span></span><span></span><span></span><span></span><span></span></div>
      </div>
      <h2>Über diese App</h2>
      <p style="margin:8px 0 0">MO:ST Zeitmanagement – ein internes Produktivitätstool für Planung, Fokus und Zeitaufzeichnung.</p>
      <div class="about-footer">
        <span class="about-credit">Erstellt von <strong>Melvin Morina</strong></span>
      </div>
      <!-- Torch placed bottom-right -->
      <div class="about-torch" aria-hidden="true">
          <!-- Uiverse.io (KSAplay) Minecraft Torch - text removed, scoped classes -->
          <label class="torch-container">
            <input type="checkbox" checked />
            <div class="checkmark" hidden></div>
            <div class="torch">
              <div class="head">
                <div class="face top">
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                </div>
                <div class="face left">
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                </div>
                <div class="face right">
                  <div></div>
                  <div></div>
                  <div></div>
                  <div></div>
                </div>
              </div>
              <div class="stick">
                <div class="side side-left">
                  <div></div><div></div><div></div><div></div>
                  <div></div><div></div><div></div><div></div>
                  <div></div><div></div><div></div><div></div>
                  <div></div><div></div><div></div><div></div>
                </div>
                <div class="side side-right">
                  <div></div><div></div><div></div><div></div>
                  <div></div><div></div><div></div><div></div>
                  <div></div><div></div><div></div><div></div>
                  <div></div><div></div><div></div><div></div>
                </div>
              </div>
            </div>
          </label>
      </div>
      <div class="modal-actions">
        <button id="closeAbout" class="btn primary">Schließen</button>
      </div>
    </div>
  </div>

  <!-- Schnellnotizen Modal (wie Neue Aufgabe) -->
  <div id="quickNotesModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content" style="max-width: 500px; max-height: 70vh; display: flex; flex-direction: column;">
            <h2>Schnellnotizen</h2>

      <!-- Neue Notiz erstellen -->
      <div style="margin-bottom: 16px; padding: 12px; background: var(--panel); border: 1px solid var(--border); border-radius: 8px;">
        <div style="display: flex; gap: 8px; margin-bottom: 8px;">
          <input type="text" id="newNoteTitle" placeholder="Titel der Notiz..." style="flex: 1; padding: 8px; border: 1px solid var(--border); border-radius: 4px; background: var(--panel-strong); color: var(--text);" />
          <button id="createNewNote" class="btn primary" style="padding: 8px 12px; white-space: nowrap;">+ Neue Notiz</button>
        </div>
        <textarea id="newNoteContent" placeholder="Inhalt der Notiz..." rows="3" style="width: 100%; padding: 8px; border: 1px solid var(--border); border-radius: 4px; background: var(--panel-strong); color: var(--text); resize: vertical; font-family: inherit;"></textarea>
      </div>

      <div class="quick-notes-list" id="mainQuickNotesList" style="flex: 1; overflow-y: auto; max-height: 350px; padding-right: 8px;">
        <div class="empty-state">Keine Schnellnotizen vorhanden</div>
      </div>
      <div class="modal-actions" style="margin-top:12px; display:flex; justify-content:flex-start; gap:8px; flex-shrink: 0;">
        <button id="closeQuickNotes" class="btn">Schließen</button>
      </div>
    </div>
  </div>

  <!-- Schnellnotiz Editor Modal -->
  <div id="quickNoteEditorModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content" style="max-width: 600px;">
      <h2 id="noteEditorTitle">Schnellnotiz bearbeiten</h2>
      <div style="margin-bottom: 16px;">
        <label style="display: block; margin-bottom: 6px; font-weight: 500;">Name:</label>
        <input type="text" id="noteEditorName" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px;" />
      </div>
      <div style="margin-bottom: 16px;">
        <label style="display: block; margin-bottom: 6px; font-weight: 500;">Inhalt:</label>
        <div id="noteEditorContent" contenteditable="true" style="min-height: 200px; padding: 12px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; line-height: 1.5; background: white; white-space: pre-wrap; overflow-y: auto;"></div>
      </div>
      <div style="margin-bottom: 16px; display: flex; gap: 8px; flex-wrap: wrap;">
        <button id="formatBold" class="btn" style="padding: 4px 8px; font-size: 12px;"><strong>B</strong></button>
        <button id="formatItalic" class="btn" style="padding: 4px 8px; font-size: 12px;"><em>I</em></button>
        <button id="formatUnderline" class="btn" style="padding: 4px 8px; font-size: 12px;"><u>U</u></button>
        <button id="formatStrike" class="btn" style="padding: 4px 8px; font-size: 12px;"><s>S</s></button>
      </div>
      <div class="modal-actions" style="margin-top: 16px; display: flex; justify-content: space-between; gap: 8px;">
        <button id="deleteNote" class="btn" style="background: #dc3545; color: white;">Löschen</button>
        <div style="display: flex; gap: 8px;">
          <button id="cancelNoteEdit" class="btn">Abbrechen</button>
          <button id="saveNoteEdit" class="btn primary">Speichern</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Analytics Modal -->
  <div id="analyticsModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content" style="max-width: 920px; max-height: 80vh; display:flex; flex-direction:column; gap:12px; overflow:hidden;">
      <h2>Analytics</h2>
      <div style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
        <div style="display:flex; gap:6px;">
          <button id="analyticsViewDay" class="btn primary">Tage</button>
          <button id="analyticsViewWeek" class="btn">Wochen</button>
          <button id="analyticsViewMonth" class="btn">Monate</button>
        </div>
        <div id="analyticsSummary" class="summary" style="margin-left:auto;">—</div>
      </div>
      <div id="analyticsChart" style="height:220px; display:flex; align-items:flex-end; gap:6px; border:1px solid rgba(0,0,0,0.06); border-radius:8px; padding:10px; background: var(--panel, rgba(0,0,0,0.03)); overflow-x:auto;">
        <!-- bars injected here -->
      </div>
      <div id="analyticsXAxis" style="display:flex; gap:6px; padding:0 10px; font-size:12px; color:var(--muted,#777); overflow-x:auto;"></div>
      <div id="analyticsDetail" style="flex:1; overflow:auto; border-top:1px dashed rgba(0,0,0,0.08); padding-top:8px; min-height: 120px;">
        <div class="summary">Details erscheinen beim Klick auf eine Säule.</div>
      </div>
      <div class="modal-actions" style="display:flex; justify-content:flex-end; gap:8px;">
        <button id="resetAnalytics" class="btn" title="Alle Analytics zurücksetzen">Zurücksetzen</button>
        <div style="display:flex; gap:8px;">
          <button id="closeAnalytics" class="btn">Schließen</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Session complete popup -->
  <div id="sessionCompleteModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content celebrate-modal">
      <div class="celebrate-icon" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon">
          <path d="M20 7L9 18L4 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h2 class="celebrate-title">Glückwunsch!</h2>
      <p class="celebrate-text">Du hast gerade <strong data-session-time>00:00:00</strong> fokussiert gearbeitet.</p>
      <p class="celebrate-sub">Zum Zeitpool hinzufügen?</p>
      <div class="modal-actions celebrate-actions">
        <button id="sessionConfirmBtn" class="btn primary">Bestätigen</button>
        <button id="sessionCancelBtn" class="btn">Später</button>
      </div>
    </div>
  </div>

  <!-- Update Available Modal -->
  <div id="updateModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content">
      <div class="modal-header">
        <h2>🚀 Update verfügbar!</h2>
      </div>
      <div class="modal-body">
        <p>Eine neue Version von MO:ST Zeitmanagement ist verfügbar.</p>
        <div id="updateDetails">
          <p><strong>Neue Version:</strong> <span id="updateVersion"></span></p>
          <div id="updateProgress" style="display: none;">
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <p id="progressText">Download läuft...</p>
          </div>
        </div>
      </div>
      <div class="modal-buttons">
        <button class="btn secondary" onclick="closeUpdateModal()">Später</button>
        <button class="btn primary" id="updateButton" onclick="startUpdate()">
          📦 Jetzt updaten
        </button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="storage.js"></script>
  <script src="renderer.js"></script>
</body>
</html>
